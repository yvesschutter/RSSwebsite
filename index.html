<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nieuwsblad Full‑Screen Ticker</title>
    <!-- Google Font voor modern uiterlijk -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
      }
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        font-family: "Roboto", sans-serif;
        background: #111;
        color: #fff;
        overflow: hidden;
      }

      /* Container voor alle slides */
      #slides {
        position: relative;
        height: 100%;
        width: 100%;
      }

      /* Individuele slide */
      .slide {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }
      .slide.active {
        opacity: 1;
      }

      /* Donkere verloopoverlay boven op elke afbeelding voor leesbaarheid */
      .slide::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          0deg,
          rgba(0, 0, 0, 0.75) 10%,
          rgba(0, 0, 0, 0.35) 40%,
          rgba(0, 0, 0, 0) 70%
        );
      }

      /* Titel / caption */
      .caption {
        position: absolute;
        left: 2vw;
        bottom: 4vh;
        width: 66vw;
        font-size: 2.6vw;
        font-weight: 700;
        line-height: 1.2;
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
      }

      @media (max-width: 768px) {
        .caption {
          font-size: 5vw;
          width: 90vw;
        }
      }
    </style>
  </head>
  <body>
    <div id="slides"></div>

    <script>
      const FEED_URL =
        "https://www.nieuwsblad.be/rss/section/55178e67-15a8-4ddd-a3d8-bfe5708f8932";
      const PROXY = "https://api.allorigins.win/get?url=";

      // Haal de items uit de RSS‑feed
      async function fetchFeed() {
        try {
          const res = await fetch(PROXY + encodeURIComponent(FEED_URL));
          const data = await res.json();
          const xml = new DOMParser().parseFromString(
            data.contents,
            "application/xml"
          );

          return Array.from(xml.querySelectorAll("item")).map((item) => {
            const title = item.querySelector("title")?.textContent || "";
            let img = "";

            // Kijk eerst naar enclosure
            const enclosure = item.querySelector("enclosure");
            if (enclosure) {
              img = enclosure.getAttribute("url");
            } else {
              // Fallback naar media:content
              const media = item.querySelector("media\\:content");
              if (media) img = media.getAttribute("url");
            }
            return { title, img };
          });
        } catch (err) {
          console.error("Kon RSS-feed niet ophalen", err);
          return [];
        }
      }

      // Bouw de slides op basis van de feed
      async function buildSlides() {
        const items = await fetchFeed();
        const container = document.getElementById("slides");
        container.innerHTML = ""; // Verwijder oude slides

        items.forEach(({ title, img }, idx) => {
          const slide = document.createElement("div");
          slide.className = "slide" + (idx === 0 ? " active" : "");
          if (img) {
            slide.style.backgroundImage = `url('${img}')`;
          }
          slide.innerHTML = `<div class="caption">${title}</div>`;
          container.appendChild(slide);
        });

        startCarousel();
      }

      // Wissel elke 8 seconden naar de volgende slide
      function startCarousel() {
        const slides = document.querySelectorAll(".slide");
        if (!slides.length) return;

        let current = 0;
        setInterval(() => {
          slides[current].classList.remove("active");
          current = (current + 1) % slides.length;
          slides[current].classList.add("active");
        }, 8000);
      }

      // Eerste load en daarna elke 5 minuten verversen
      buildSlides();
      setInterval(buildSlides, 5 * 60 * 1000);
    </script>
  </body>
</html>
